# 质量属性



## Specifying Qulity Attributes

准确的定义质量属性对在架构层面上进行评估是十分有必要的。

质量属性场景是用来定义目标质量属性的重要方法。

场景是有着确定结构的简单句子，两类主要的场景是：

1.  通用场景是系统独立的场景，目的是去引导整个质量属性需求
2. 具体场景是系统相关的场景，目的是去构建在质量属性在具体应用上的定义。 这是通用场景的一种扩展。



#### General Scenarios

* 通用场景提供了一个去产生大量的通用，系统独立的质量属性场景的框架。
* 每个质量属性都潜在的但不是必然和我们处理的系统相关。
* 为了让通用场景对与具体的系统产生作用，我们必须把针对系统进行定制。

##### 组成元素

* Stimulus:  当到达系统时一个需要被考虑到的条件。
* Source of Stimulus:  一个产生刺激的实体。
* Response:  当刺激到达后产生的行动
* Response Meassure:   对刺激的回应必须在某种程度上可以进行测量，这样对应的需求才可以被检验。
* 环境， 当刺激发生时系统处于的条件。 
* Artifat: 整个系统或者需求对应的系统的一部分。

#### Tactics

TODO: 



#### 质量设计决策

一共有7种类型的决策：

1. 职责的分配
2. coordination model
3. Data model
4. management of resources
5. Mapping among architecture elements
6. Binding time decisions
7. Choice of technology





#### 可用性

##### Source 

###### general 

Internal/external: people, hardware, software, physical infrastructure, physical environment 

###### concrete

Heartbeat/Monitor



##### Stimulus 

###### general 

Fault: omission, crash, incorrect timing, incorrect response 

###### concrete

Server unresponsive



##### Artifact 

###### general

Processors, communication channels, persistent storage, processes 

###### concrete

Process



##### Environment 

###### general 

Normal operation,startup,shutdown,repair mode,degraded operation, overloaded operation 

###### concrete

Normal operation



##### Response 

###### general

Prevent the fault from becoming a failure 

Detect the fault: 

- Log the fault 
- Notify appropriate entities (people or systems) 

Recover from the fault: 

- Disable source of events causing the fault 
- Be temporarily unavailable while repair is being effected 
- Fix or mask the fault/failure or contain the damage it causes 
- Operate in a degraded mode while repair is being effected 



###### concrete

Inform operator continue to operate



#####Response Measure 

###### general

Time or time interval when the system must be available Availability percentage (e.g., 99.999%)
 Time to detect the fault
 Time to repair the fault 

Time or time interval in which system can be in degraded mode Proportion (e.g., 99%) or rate (e.g., up to 100 per second) of a certain class of faults that the system prevents, or handles without failing 

###### concrete

No downtime





#### 性能

##### Source 

###### general 

Internal or external to the system

###### concrete

Users



##### Stimulus 

###### general 

Arrival of a periodic, sporadic, or stochastic event

###### concrete

Initiate Transactions



##### Artifact 

###### general

System or one or more components in the system

###### concrete

System



##### Environment 

###### general 

Operational mode: normal, emergency, peak load, overload

###### concrete

Normal operation



##### Response 

###### general

Process events, change level of service

###### concrete

Transactions Are Processed



##### Response Measure 

###### general

Latency, deadline, throughput, jitter, miss rate

###### concrete

Average Latency  of Two  Seconds



#### 互操作性

##### Source 

###### general 

A system initiates a request to interoperate with another system

###### concrete

Our Vehicle Information System



##### Stimulus 

###### general 

A request to exchange information among system(s).

###### concrete

Current Location Sent



##### Artifact 

###### general

The systems that wish to interoperate.

###### concrete

Traffic Monitoring System



##### Environment 

###### general 

System(s) wishing to interoperate are discovered at runtime or known prior to runtime.

###### concrete

Systems known prior to run-time



##### Response 

###### general

One or more of the following: 

- The request is (appropriately) rejected and appropriate 

  entities (people or systems) are notified. 

- The request is (appropriately) accepted and information is 

  exchanged successfully. 

- The request is logged by one or more of the involved 

  systems.

###### concrete

Traffic Monitor Combines Current Location with Other
Information, Overlays on Google Maps, and Broadcasts



##### Response Measure 

###### general

​	One or more of the following: 

1. * Percentage of information exchanges correctly processed 

2. * Percentage of information exchanges correctly rejected 

###### concrete

​       Our Information Included Correctly 99.9% of the Time



#### 安全性

##### Source 

###### general 

Human or another system which may have been previously identified (either correctly or incorrectly) or may be currently unknown. A human attacker may be from outside the organization or from inside the organization.

###### concrete

Disgruntled Employee from Remote Location 



##### Stimulus 

###### general 

Unauthorized attempt is made to display data, change or delete data, access system services, change the system’s behavior, or reduce availability.

###### concrete

Attempts to Modify Pay Rate



##### Artifact 

###### general

System services, data within the system, a component or resources of the system, data produced or consumed by the system

###### concrete

Data within the System



##### Environment 

###### general 

The system is either online or offline; either connected to or disconnected from a network; either behind a firewall or open to a network; fully operational, partially operational, or not operational.

###### concrete

Normal Operations



##### Response 

###### general

- Transactions are carried out in a fashion such that 

  - Data or services are protected from unauthorized access. 

  - Data or services are not being manipulated without authorization. 

  - Parties to a transaction are identified with assurance. 

  - The parties to the transaction cannot repudiate their 

    involvements. 

  - The data, resources, and system services will be available for 

    legitimate use.
     The system tracks activities within it by 

  - Recording access or modification 

  - Recording attempts to access data, resources, or services 

  - Notifying appropriate entities (people or systems) when an 

    apparent attack is occurring 

###### concrete

System Maintains Audit Trail



##### Response Measure 

###### general

One or more of the following: 

1. - How much of a system is compromised when a particular 

     component or data value is compromised 

   - How much time passed before an attack was detected 

   - How many attacks were resisted 

   - How long does it take to recover from a successful attack 

   - How much data is vulnerable to a particular attack  

###### concrete

Correct Data Is Restored within a Day and Source of Tampering Identified











## ASR 









**16.1 Gathering aSrs from requirements documents** 

An obvious location to look for candidate ASRs is in the requirements documents or in user stories. After all, we are looking for requirements, and requirements should be in requirements documents. Unfortunately, this is not usually the case, although as we will see, there is information in the requirements documents that can be of use. 

**don’t Get your Hopes up** 

Many projects don’t create or maintain the kind of requirements document that professors in software engineering classes or authors of traditional software en- gineering books love to prescribe. Whether requirements are specified using the “MoSCoW” style (must, should, could, won’t), or as a collection of “user sto- ries,” neither of these is much help in nailing down quality attributes. 

Furthermore, no architect just sits and waits until the requirements are “fin- ished” before starting work. The architect *must* begin while the requirements are still in flux. Consequently, the QA requirements are quite likely to be up in the air when the architect starts work. Even where they exist and are stable, require- ments documents often fail an architect in two ways. 

First, most of what is in a requirements specification does not affect the architecture. As we’ve seen over and over, architectures are mostly driven or “shaped” by quality attribute requirements. These determine and constrain the most important architectural decisions. And yet the vast bulk of most require- ments specifications is focused on the required features and functionality of a system, which shape the architecture the least. The best software engineering practices do prescribe capturing quality attribute requirements. For example, the Software Engineering Body of Knowledge (SWEBOK) says that quality attribute requirements are like any other requirements. They must be captured if they are important, and they should be specified unambiguously and be testable. 

In practice, though, we rarely see adequate capture of quality attribute re- quirements. How many times have you seen a requirement of the form “The system shall be modular” or “The system shall exhibit high usability” or “The system shall meet users’ performance expectations”? These are not requirements, but in the best case they are invitations for the architect to begin a conversation about what the requirements in these areas really are. 

Second, much of what is useful to an architect is not in even the best re- quirements document. Many concerns that drive an architecture do not manifest themselves at all as observables in the system being specified, and so are not the subject of requirements specifications. ASRs often derive from business goals in the development organization itself; we’ll explore this in Section 16.3. De- velopmental qualities are also out of scope; you will rarely see a requirements document that describes teaming assumptions, for example. In an acquisition context, the requirements document represents the interests of the acquirer, not that of the developer. But as we saw in Chapter 3, stakeholders, the technical environment, and the organization itself all play a role in influencing architectures.

**Sniffing Out aSrs from a requirements document** 

Although requirements documents won’t tell an architect the whole story, they are an important source of ASRs. Of course, ASRs aren’t going to be conve- niently labeled as such; the architect is going to have to perform a bit of excava- tion and archaeology to ferret them out. 

Chapter 4 categorizes the design decisions that architects have to make. Ta- ble 16.1 summarizes each category of architectural design decision, and it gives a list of requirements to look for that might affect that kind of decision. If a re- quirement affects the making of a critical architectural design decision, it is by definition an ASR. 





**16.2 Gathering aSrs by Interviewing Stakeholders** 

Say your project isn’t producing a comprehensive requirements document. Or it is, but it’s not going to have the QAs nailed down by the time you need to start your design work. What do you do? 

Architects are often called upon to help set the quality attribute requirements for a system. Projects that recognize this and encourage it are much more likely to be successful than those that don’t. Relish the opportunity. Stakeholders often have no idea what QAs they want in a system, and no amount of nagging is going to suddenly instill the necessary insight. If you insist on quantitative QA require- ments, you’re likely to get numbers that are arbitrary, and there’s a good chance that you’ll find at least some of those requirements will be very difficult to satisfy. 

Architects often have very good ideas about what QAs are exhibited by sim- ilar systems, and what QAs are reasonable (and reasonably straightforward) to provide. Architects can usually provide quick feedback as to which quality attri- butes are going to be straightforward to achieve and which are going to be prob- lematic or even prohibitive. And architects are the only people in the room who can say, “I can actually deliver an architecture that will do better than what you had in mind—would that be useful to you?” 

Interviewing the relevant stakeholders is the surest way to learn what they know and need. Once again, it behooves a project to capture this critical informa- tion in a systematic, clear, and repeatable way. Gathering this information from stakeholders can be achieved by many methods. One such method is the Quality Attribute Workshop (QAW), described in the sidebar. 

The results of stakeholder interviews should include a list of architectural drivers and a set of QA scenarios that the stakeholders (as a group) prioritized. This information can be used to do the following: 

- Refine system and software requirements 

- Understand and clarify the system’s architectural drivers 

- Provide rationale for why the architect subsequently made certain design 

  decisions 

- Guide the development of prototypes and simulations 

- Influence the order in which the architecture is developed 





**16.3 Gathering aSrs by understanding the business Goals** 

Business goals are the *raison d’être* for building a system. No organization builds a system without a reason; rather, the organization’s leaders want to further the mission and ambitions of their organization and themselves. Common business goals include making a profit, of course, but most organizations have many more concerns than simply profit, and in other organizations (e.g., nonprofits, charities, governments), profit is the farthest thing from anyone’s mind. 

Business goals are of interest to architects because they often are the precursor or progenitor of requirements that may or may not be captured in a requirements specification but whose achievement (or lack) signals a successful (or less than suc- cessful) architectural design. Business goals frequently lead directly to ASRs. 

There are three possible relationships between business goals and an architecture: 

1. *Business goals often lead to quality attribute requirements.* Or to put it another way, every quality attribute requirement—such as user-visible response time or platform flexibility or ironclad security or any of a dozen other needs—should originate from some higher purpose that can be described in terms of added value. If we ask, for example, “*Why* do you want this system to have a really fast response time?”, we might hear that this will differentiate the product from its competition and let the developing organization capture market share; or that this will make the soldier a more effective warfighter, which is the mission of the acquiring organization; or other reasons having to do with the satisfaction of some business goal. 
2. *Business goals may directly affect the architecture without precipitating a quality attribute requirement at all.* In Chapter 3 we told the story of the architect who designed a system without a database until the manager informed him that the database team needed work. The architecture was importantly affected without any relevant quality attribute requirement. 

3. *No influence at all.* Not all business goals lead to quality attributes. For example, a business goal to “reduce cost” may be realized by lowering the facility’s thermostats in the winter or reducing employees’ salaries or pensions. 

Figure 16.1 illustrates the major points just described. In the figure, the ar- rows mean “leads to.” The solid arrows are the ones highlighting relationships of most interest to architects. 

Architects often become aware of an organization’s business and business goals via osmosis—working, listening, talking, and soaking up the goals that are at work in an organization. Osmosis is not without its benefits, but more system- atic ways are possible. We describe one such way in the sidebar “A Method for Capturing Business Goals.” 





**16.4 capturing aSrs in a utility tree** 

As we have seen, ASRs can be extracted from a requirements document, captured from stakeholders in a workshop such as a QAW, or derived from business goals. It is helpful to record them in one place so that the list can be reviewed, refer- enced, used to justify design decisions, and revisited over time or in the case of major system changes. 

To recap, an ASR must have the following characteristics: 

- *A profound impact on the architecture.* Including this requirement will very likely result in a different architecture than if it were not included. 
- *A high business or mission value.* If the architecture is going to satisfy this requirement—potentially at the expense of not satisfying others—it must be of high value to important stakeholders. 

Using a single list can also help evaluate each potential ASR against these
criteria, and to make sure that no architectural drivers, stakeholder classes, or
business goals are lacking ASRs that express their needs.



Architects can use a construct called a *utility tree* for all of these purposes. A utility tree begins with the word “utility” as the root node. Utility is an expression of the overall “goodness” of the system. We then elaborate this root node by listing the major quality attributes that the system is required to exhibit. (We said in Chap- ter 4 that quality attribute names by themselves were not very useful. Never fear: we are using them only as placeholders for subsequent elaboration and refinement!) 

Under each quality attribute, record a specific refinement of that QA. For example, performance might be decomposed into “data latency” and “transac- tion throughput.” Or it might be decomposed into “user wait time” and “time to refresh web page.” The refinements that you choose should be the ones that are relevant to your system. Under each refinement, record the appropriate ASRs (usually expressed as QA scenarios). 

Some ASRs might express more than one quality attribute and so might ap- pear in more than one place in the tree. That is not necessarily a problem, but it could be an indication that the ASR tries to cover too much diverse territory. Such ASRs may be split into constituents that each attach to smaller concerns. 

Once the ASRs are recorded and placed in the tree, you can now evaluate them against the two criteria we listed above: the business value of the candidate ASR and the architectural impact of including it. You can use any scale you like, but we find that a simple “H” (high), “M” (medium), and “L” (low) suffice for each criterion. 

For business value, High designates a must-have requirement, Medium is for a requirement that is important but would not lead to project failure were it omitted. Low describes a nice requirement to have but not something worth much effort. 

For architectural impact, High means that meeting this ASR will profoundly affect the architecture. Medium means that meeting this ASR will somewhat af- fect the architecture. Low means that meeting this candidate ASR will have little effect on the architecture. 

Table 16.5 shows a portion of a sample utility tree drawn from a health care ap- plication called Nightingale. Each ASR is labeled with a pair of “H,” “M,” and “L” values indicating (a) the ASR’s business value and (b) its effect on the architecture. 

Once you have a utility tree filled out, you can use it to make important checks. For instance: 

- A QA or QA refinement without any ASR is not necessarily an error or omission that needs to be rectified, but it is an indication that attention should be paid to finding out for sure if there are unrecorded ASRs in that area. 
- ASRs that rate a (H,H) rating are obviously the ones that deserve the most attention from you; these are the most significant of the significant require- ments. A very large number of these might be a cause for concern about whether the system is achievable. 
- Stakeholders can review the utility tree to make sure their concerns are ad- dressed. (An alternative to the organization we have described here is to use stakeholder roles rather than quality attributes as the organizing rule under “Utility.”) 